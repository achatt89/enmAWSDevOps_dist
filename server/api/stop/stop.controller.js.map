{"version":3,"sources":["api/stop/stop.controller.js"],"names":["index","aws","require","config","update","region","ec2","EC2","request","response","params","InstanceIds","body","instanceId","DryRun","stopInstances","error","data","json","callback","send"],"mappings":"AAAA;;;;;AAKA;;;;;QASgBA,K,GAAAA,K;AAPhB,IAAIC,MAAMC,QAAQ,SAAR,CAAV;;AAEAD,IAAIE,MAAJ,CAAWC,MAAX,CAAkB,EAACC,QAAQ,WAAT,EAAlB;;AAEA,IAAIC,MAAM,IAAIL,IAAIM,GAAR,EAAV;;AAEA;AACO,SAASP,KAAT,CAAeQ,OAAf,EAAwBC,QAAxB,EAAkC;AACvC,MAAIC,SAAS;AACXC,iBAAa,CAACH,QAAQI,IAAR,CAAaC,UAAd,CADF;AAEXC,YAAQ;AAFG,GAAb;;AAKA;AACAR,MAAIS,aAAJ,CAAkBL,MAAlB,EAA0B,UAAUM,KAAV,EAAiBC,IAAjB,EAAuB;AAC/C,QAAID,KAAJ,EAAW;AACTP,eAASS,IAAT,CAAcF,KAAd;AACD,KAFD,MAEO;AACLG,eAASF,IAAT;AACD;AACF,GAND;;AAQA,WAASE,QAAT,CAAkBF,IAAlB,EAAwB;AACtBR,aAASW,IAAT,CAAcH,IAAd;AACD;AACF","file":"stop.controller.js","sourcesContent":["/**\n * Using Rails-like standard naming convention for endpoints.\n * GET     /api/restarts              ->  index\n */\n\n'use strict';\n\nlet aws = require('aws-sdk');\n\naws.config.update({region: 'eu-west-1'});\n\nlet ec2 = new aws.EC2();\n\n// Stops an Instance\nexport function index(request, response) {\n  let params = {\n    InstanceIds: [request.body.instanceId],\n    DryRun: false\n  };\n\n  //Call EC2 to start the selected instance\n  ec2.stopInstances(params, function (error, data) {\n    if (error) {\n      response.json(error);\n    } else {\n      callback(data);\n    }\n  });\n\n  function callback(data) {\n    response.send(data);\n  }\n}\n"]}