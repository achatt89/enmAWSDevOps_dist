{"version":3,"sources":["api/listAllInstances/listAllInstances.controller.js"],"names":["index","aws","require","util","config","update","region","ec2","EC2","request","response","io","app","get","describeInstances","error","data","json","callback","format","send"],"mappings":"AAAA;;;;;AAKA;;;;;QAUgBA,K,GAAAA,K;AARhB,IAAIC,MAAMC,QAAQ,SAAR,CAAV;AACA,IAAIC,OAAOD,QAAQ,MAAR,CAAX;;AAEAD,IAAIG,MAAJ,CAAWC,MAAX,CAAkB,EAACC,QAAQ,WAAT,EAAlB;;AAEA,IAAIC,MAAM,IAAIN,IAAIO,GAAR,EAAV;;AAEA;AACO,SAASR,KAAT,CAAeS,OAAf,EAAwBC,QAAxB,EAAkC;AACvC,MAAIC,KAAKF,QAAQG,GAAR,CAAYC,GAAZ,CAAgB,IAAhB,CAAT;AACAN,MAAIO,iBAAJ,CAAsB,UAAUC,KAAV,EAAiBC,IAAjB,EAAuB;AAC3C,QAAID,KAAJ,EAAW;AACTL,eAASO,IAAT,CAAcF,KAAd;AACD,KAFD,MAGK;AACH;AACAG,eAASf,KAAKgB,MAAL,CAAY,IAAZ,EAAkBH,IAAlB,CAAT,EAAkCL,EAAlC;AACD;AACF,GARD;;AAUA,WAASO,QAAT,CAAkBF,IAAlB,EAAwBL,EAAxB,EAA4B;AAC1BD,aAASU,IAAT,CAAcJ,IAAd;AACA;AACD;AACF","file":"listAllInstances.controller.js","sourcesContent":["/**\n * Using Rails-like standard naming convention for endpoints.\n * GET     /api/listAllInstancess              ->  index\n */\n\n'use strict';\n\nlet aws = require('aws-sdk');\nlet util = require('util');\n\naws.config.update({region: 'eu-west-1'});\n\nlet ec2 = new aws.EC2();\n\n// Gets a list of ListAllInstances\nexport function index(request, response) {\n  var io = request.app.get('io');\n  ec2.describeInstances(function (error, data) {\n    if (error) {\n      response.json(error);\n    }\n    else {\n      // io.emit('fetchInstanceList', response.send(util.format('%s', data)));\n      callback(util.format('%j', data), io);\n    }\n  });\n\n  function callback(data, io) {\n    response.send(data);\n    // io.emit('fetchInstanceList', response.send(data));\n  }\n}\n"]}