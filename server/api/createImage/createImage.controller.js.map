{"version":3,"sources":["api/createImage/createImage.controller.js"],"names":["index","aws","require","config","update","region","ec2","EC2","request","response","params","InstanceIds","body","instanceId","Name","instanceName","BlockDeviceMappings","DeviceName","DryRun","startInstances","error","data","json","callback","send"],"mappings":"AAAA;;;;;AAKA;;;;;QAUgBA,K,GAAAA,K;AARhB,IAAIC,MAAMC,QAAQ,SAAR,CAAV;AACA;;AAEAD,IAAIE,MAAJ,CAAWC,MAAX,CAAkB,EAACC,QAAQ,WAAT,EAAlB;;AAEA,IAAIC,MAAM,IAAIL,IAAIM,GAAR,EAAV;;AAEA;AACO,SAASP,KAAT,CAAeQ,OAAf,EAAwBC,QAAxB,EAAkC;AACvC,MAAIC,SAAS;AACXC,iBAAa,CAACH,QAAQI,IAAR,CAAaC,UAAd,CADF;AAEXC,UAAM,CAACN,QAAQI,IAAR,CAAaG,YAAd,CAFK;AAGXC,yBAAqB,CACnB;AACEC,kBAAY;AADd,KADmB,CAHV;AAQXC,YAAQ;;AARG,GAAb;;AAYA;AACAZ,MAAIa,cAAJ,CAAmBT,MAAnB,EAA2B,UAAUU,KAAV,EAAiBC,IAAjB,EAAuB;AAChD,QAAID,KAAJ,EAAW;AACTX,eAASa,IAAT,CAAcF,KAAd;AACD,KAFD,MAEO;AACLG,eAASF,IAAT;AACD;AACF,GAND;;AAQA,WAASE,QAAT,CAAkBF,IAAlB,EAAwB;AACtBZ,aAASe,IAAT,CAAcH,IAAd;AACD;AACF","file":"createImage.controller.js","sourcesContent":["/**\n * Using Rails-like standard naming convention for endpoints.\n * GET     /api/restarts              ->  index\n */\n\n'use strict';\n\nlet aws = require('aws-sdk');\n// var util = require('util');\n\naws.config.update({region: 'eu-west-1'});\n\nlet ec2 = new aws.EC2();\n\n// Restarts an Instance\nexport function index(request, response) {\n  let params = {\n    InstanceIds: [request.body.instanceId],\n    Name: [request.body.instanceName],\n    BlockDeviceMappings: [\n      {\n        DeviceName: ''\n      }\n    ],\n    DryRun: true,\n\n  };\n\n  //Call EC2 to start the selected instance\n  ec2.startInstances(params, function (error, data) {\n    if (error) {\n      response.json(error);\n    } else {\n      callback(data);\n    }\n  });\n\n  function callback(data) {\n    response.send(data);\n  }\n}\n"]}